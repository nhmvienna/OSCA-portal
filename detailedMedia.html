<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta property="og:type" content="article" />


    <title>Open Scientific Collections Austria (OSCA) - Portal</title>
    <link rel="shortcut icon" href="https://osca.science/assets/icons/apple-touch-icon.png">

    <meta name="author" content="" />
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <meta name="og:title" property="og:title" content="" />
    <meta name="og:description" property="og:description" content="" />
    <meta name="og:image" property="og:image" content="" />
    <meta name="twitter:title" content="" />
    <meta name="twitter:description" content="" />
    <meta name="twitter:image" content="" />
    <meta name="twitter:card" content="summary_large_image" />
    <!-- Tailwind CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- Pazly Colors -->
    <link rel="stylesheet" href="css/colors/gradients.css" />
    <link rel="stylesheet" href="css/colors/backgrounds.css" />
    <link rel="stylesheet" href="css/colors/text.css" />
    <link rel="stylesheet" href="css/colors/border.css" />
    <style>
        body {
            overflow-x: hidden;
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            line-height: 1.3 !important;
        }

        ol {
            list-style-type: decimal !important;
            padding-left: 1em !important;
        }

        ul {
            list-style-type: disc !important;
            padding-left: 1em !important;
        }

        .stretchToScreen {
            width: 100vw;
            height: 100vh;
        }
    </style>

    <!-- Fontswesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/js/all.min.js"></script>
</head>

<body class="m-0 p-0 stretchToScreen">


    <!-- Pazly Blocks Come Here -->
    <section id="pazly-template-set" class="m-0 p-0 stretchToScreen bg-white">
        <img id="detailedMedia" src="" alt="" srcset="" class="w-full">

    </section>
    <!-- Pazly Blocks Ends Here -->

    <!-- Pazly Scripts Start Here -->
    <section id="pazly-scripts-set" class="m-0 p-0 w-0 h-0">

        <!-- Smooth scrolling -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <script>

            function getUrlVars() {
                var vars = [], hash;
                var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
                for (var i = 0; i < hashes.length; i++) {
                    hash = hashes[i].split('=');
                    vars.push(hash[0]);
                    vars[hash[0]] = hash[1];
                }
                return vars;
            }

            function isImageLink(link) {
                // Get the file extension from the link
                var fileExtension = link.split('.').pop().toLowerCase();

                // List of common image file extensions
                var imageExtensions = ['jpg', 'jpeg', 'png', 'gif', 'bmp', 'svg'];

                // Check if the file extension is in the list of image extensions
                return imageExtensions.includes(fileExtension);
            }


            // handle links with @href started with '#' only
            $(document).on('click', 'a[href^="#"]', function (e) {
                // target element id
                var id = $(this).attr('href');

                // target element
                var $id = $(id);
                if ($id.length === 0) {
                    return;
                }

                // prevent standard hash navigation (avoid blinking in IE)
                e.preventDefault();

                // top position relative to the document
                var pos = $id.offset().top;

                // animated top scrolling
                $('body, html').animate({ scrollTop: pos });
            });


            $(document).ready(function () {
                let resource = decodeURIComponent(getUrlVars()['src']);

                if (resource) {
                    console.log(resource);

                    if(isImageLink(resource)) { // show image
                        $('#detailedMedia').attr("src",resource);
                    } else { // show the app
                        if(resource.includes('method=europeana')) { // show instead of download
                            window.location.replace(resource.replace('method=europeana', 'method=show')); 
                        } else {
                            window.location.replace(resource); 
                        }
                    }

                } else {
                    $('#detailedMedia').attr("src",'https://images.pexels.com/photos/1632044/pexels-photo-1632044.jpeg?auto=compress&cs=tinysrgb&w=800');
                }

                    
            })
        </script>

    </section>

</body>

</html>